import{d as j,u as M,a as B,r as i,D as T,E as H,b as l,c as _,o as d,e as a,f as g,w as s,h as b,l as E,i as K,F as P,j as z,k as $,T as q,G,H as Q}from"./main-BMNi4XeV.js";import{P as X}from"./PatternUtil-DSsBJKfN.js";const k=Object.freeze({ONCE:"ONCE",DAILY:"DAILY",WEEKLY:"WEEKLY"}),U=Object.freeze({SUN:"周日",MON:"周一",TUE:"周二",WED:"周三",THU:"周四",FRI:"周五",SAT:"周六"}),Z={class:"m-2"},ee={class:"m-3 mb-0 vcb position-relative"},ae=j({__name:"JobForm",emits:["success"],setup(te,{emit:V}){const N=[{pattern:X.title,message:"2个字符以上."}],n=M(),J=V,t=B({id:"",title:"",award:1,repeatType:"DAILY",weekdays:["SUN","MON","TUE","WED","THU","FRI","SAT"]}),p=i(!1),u=i("1");function A(){t.award=Number(u.value);const r=G(t);Q(r).then(e=>{n.currentJob?(n.currentJob.title=e.title,n.currentJob.award=e.award,n.currentJob.repeatType=e.repeatType,n.currentJob.weekdays=e.weekdays,n.currentJob=void 0):n.jobList.push(e),L(),J("success")})}function L(){t.id="",t.title="",t.award=1,t.repeatType="DAILY",t.weekdays=["SUN","MON","TUE","WED","THU","FRI","SAT"]}const m=i(!1),S=Object.keys(U),C=["周日","周一","周二","周三","周四","周五","周六"],D=T(()=>{const r=t.weekdays.length;return r===0?(t.repeatType=k.ONCE,"不重复"):r===7?(t.repeatType=k.DAILY,"每天"):(t.repeatType=k.WEEKLY,t.weekdays.map(e=>U[e]).join(" "))}),c=i(!0);c.value=t.weekdays.length===7;const O=T(()=>t.weekdays.length>0&&t.weekdays.length<7);function h(r){t.weekdays=r?["SUN","MON","TUE","WED","THU","FRI","SAT"]:[]}return H(()=>{n.currentJob&&(t.id=n.currentJob.id,t.title=n.currentJob.title,u.value=n.currentJob.award.toString(),t.repeatType=n.currentJob.repeatType,t.weekdays=n.currentJob.weekdays)}),(r,e)=>{const y=l("van-field"),v=l("van-cell"),x=l("van-button"),w=l("van-cell-group"),I=l("van-form"),f=l("van-checkbox"),W=l("van-checkbox-group"),F=l("van-popup"),Y=l("van-number-keyboard");return d(),_("div",null,[a(I,{onSubmit:A},{default:s(()=>[a(w,{inset:"",class:"border mt-2 grow-value"},{default:s(()=>[a(y,{label:"任务","input-align":"right",rules:N,required:"",modelValue:t.title,"onUpdate:modelValue":e[0]||(e[0]=o=>t.title=o)},null,8,["modelValue"]),a(y,{label:"奖励","input-align":"right",type:"digit",modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=o=>u.value=o),clickable:"",onTouchstart:e[2]||(e[2]=E(o=>p.value=!0,["stop"]))},null,8,["modelValue"]),a(v,{title:"重复",value:D.value,"is-link":"",onClick:e[3]||(e[3]=o=>m.value=!0)},null,8,["value"]),b("div",Z,[a(x,{type:"primary",size:"small",block:"","native-type":"submit"},{default:s(()=>[...e[10]||(e[10]=[K(" 提交 ",-1)])]),_:1})])]),_:1})]),_:1}),a(F,{show:m.value,"onUpdate:show":e[7]||(e[7]=o=>m.value=o),teleport:"#app",round:"",position:"bottom",closeable:""},{default:s(()=>[b("div",ee,[e[11]||(e[11]=b("h3",null,"重复",-1)),a(v,{clickable:"",title:"全选"},{"right-icon":s(()=>[a(f,{modelValue:c.value,"onUpdate:modelValue":e[4]||(e[4]=o=>c.value=o),indeterminate:O.value,onChange:h},null,8,["modelValue","indeterminate"])]),_:1})]),a(W,{modelValue:t.weekdays,"onUpdate:modelValue":e[6]||(e[6]=o=>t.weekdays=o),class:"mb-2"},{default:s(()=>[a(w,{inset:""},{default:s(()=>[(d(!0),_(P,null,z($(S),(o,R)=>(d(),g(v,{clickable:"",key:o,title:C[R]},{"right-icon":s(()=>[a(f,{name:o,onClick:e[5]||(e[5]=E(()=>{},["stop"]))},null,8,["name"])]),_:2},1032,["title"]))),128))]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["show"]),(d(),g(q,{to:"body"},[a(Y,{modelValue:u.value,"onUpdate:modelValue":e[8]||(e[8]=o=>u.value=o),show:p.value,maxlength:3,onBlur:e[9]||(e[9]=o=>p.value=!1)},null,8,["modelValue","show"])]))])}}});export{k as R,U as W,ae as _};
