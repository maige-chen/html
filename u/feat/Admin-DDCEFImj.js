import{d as L,u as F,r as N,b as d,c as v,o as s,e as r,w as a,F as z,j as J,k as u,f as p,g as A,i as c,L as g,h,t as k,p as B,z as V,A as w}from"./main-tl-mSqkc.js";const P={class:"me-1"},$=L({__name:"Admin",setup(j){const e=F(),y=N(!1);function b(){e.todayFinished||w(e.todayPn).then(l=>{e.todayJobList.push(...l.data),l.hasNext?e.todayPn+=1:e.todayFinished=!0})}function _(l,t){let i=e.todayJobList[l];if(!i){B("操作错误.");return}const o=i.logId;V(o,t).then(f=>{i.logState=t})}return(l,t)=>{const i=d("van-nav-bar"),o=d("van-button"),f=d("van-space"),x=d("van-cell"),C=d("van-list");return s(),v("div",null,[r(i,{title:"任务审核"}),r(C,{loading:y.value,"onUpdate:loading":t[0]||(t[0]=n=>y.value=n),finished:u(e).todayFinished,"finished-text":"没有更多了",onLoad:b},{default:a(()=>[(s(!0),v(z,null,J(u(e).todayJobList,(n,m)=>(s(),p(x,{key:n.id,center:""},{title:a(()=>[h("span",P,k(m+1)+". ",1),h("span",null,k(n.title),1)]),value:a(()=>[n.logState===null||n.logState===void 0?(s(),p(o,{key:0,size:"small",style:{height:"24px"}},{default:a(()=>[...t[1]||(t[1]=[c(" 未完成 ",-1)])]),_:1})):n.logState===0?(s(),p(f,{key:1},{default:a(()=>[r(o,{type:"danger",size:"small",style:{height:"24px"},onClick:S=>_(m,u(g).Rejected)},{default:a(()=>[...t[2]||(t[2]=[c(" 不通过 ",-1)])]),_:1},8,["onClick"]),r(o,{type:"primary",size:"small",style:{height:"24px"},onClick:S=>_(m,u(g).Passed)},{default:a(()=>[...t[3]||(t[3]=[c(" 通过 ",-1)])]),_:1},8,["onClick"])]),_:2},1024)):n.logState===1?(s(),p(o,{key:2,type:"success",size:"small",style:{height:"24px"}},{default:a(()=>[...t[4]||(t[4]=[c(" 已完成 ",-1)])]),_:1})):A("",!0)]),_:2},1024))),128))]),_:1},8,["loading","finished"])])}}});export{$ as default};
