import{u as F,T as N,M as $,I as w}from"./merchant-CUAtrgkL.js";import{d as B,b as c,g as I,c as p,a,l as v,m as U,j as r,u as f,r as o,o as m,i as M,k as T,F as z,p as A}from"./index-BMHCa1d-.js";import"./function-call-DTI9OgY7.js";const P={class:"m-2"},D=B({__name:"Index.page",setup(S){const t=F(),i=c(!1),l=I({tel:"",m:"carwash"}),_=/^1[3456789][0-9]{9}$/;function h(){const s={mobile:l.tel,module:l.m.toUpperCase()};w.add(s).then(e=>{t.inviteList.unshift(e),i.value=!1})}const u=c(!1);function b(){t.merchantFinished||$.list(t.merchantPn).then(s=>{t.merchantList.push(...s.data),s.hasNext?t.merchantPn+=1:t.merchantFinished=!0})}return(s,e)=>{const g=o("van-icon"),V=o("van-nav-bar"),d=o("van-field"),k=o("van-button"),C=o("van-cell-group"),x=o("van-form"),y=o("van-cell"),L=o("van-list");return m(),p("div",null,[a(V,{title:"商家管理","left-arrow":"",onClickLeft:e[1]||(e[1]=n=>s.$router.push("/"))},{right:r(()=>[a(g,{name:"gift-card",size:"28",onClick:e[0]||(e[0]=n=>i.value=!i.value)})]),_:1}),i.value?(m(),v(x,{key:0,onSubmit:h},{default:r(()=>[a(C,{inset:"",class:"border mt-2"},{default:r(()=>[a(d,{modelValue:l.tel,"onUpdate:modelValue":e[2]||(e[2]=n=>l.tel=n),type:"tel",label:"手机号 :",required:"",rules:[{pattern:_,message:"请填写正确的手机号码."}]},null,8,["modelValue","rules"]),a(d,{label:"功能模块",colon:"",modelValue:l.m,"onUpdate:modelValue":e[3]||(e[3]=n=>l.m=n),readonly:""},null,8,["modelValue"]),M("div",P,[a(k,{type:"primary",size:"small",block:"","native-type":"submit"},{default:r(()=>[...e[5]||(e[5]=[T(" 提交 ",-1)])]),_:1})])]),_:1})]),_:1})):U("",!0),a(L,{loading:u.value,"onUpdate:loading":e[4]||(e[4]=n=>u.value=n),finished:f(t).merchantFinished,"finished-text":"没有更多了",onLoad:b},{default:r(()=>[(m(!0),p(z,null,A(f(t).merchantList,n=>(m(),v(y,{icon:"flag-o",title:n.usr+":"+n.nickname,value:n.app},null,8,["title","value"]))),256))]),_:1},8,["loading","finished"]),a(N)])}}});export{D as default};
