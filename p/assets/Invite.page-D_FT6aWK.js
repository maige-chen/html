import{u as L,T as N,I as B}from"./merchant-DpJO1FE0.js";import{d as F,b as v,c as u,a as s,h as _,i as m,w as r,u as b,r as o,o as i,g as $,t as I,F as T,k as V,j as g}from"./index-D7_wT6D8.js";import{s as x}from"./axios-SOJpRU6K.js";const D=["onClick"],R=F({__name:"Invite.page",setup(E){const a=L(),l=v(!1),d=v(""),p=v(!1);function k(){a.inviteFinished||B.list(a.invitePn).then(n=>{const e=n.data;a.inviteList.push(...e),n.hasNext?a.invitePn+=1:a.inviteFinished=!0})}function f(n){return new Date(n)>new Date}async function w(n){const e=BASE_URL+"/m/#/register?i="+n.code;d.value=e,l.value=!0;try{await navigator.clipboard.writeText(e),x({type:"success",message:"复制成功."})}catch(c){x({message:"复制失败:"+c})}}return(n,e)=>{const c=o("van-nav-bar"),h=o("van-icon"),y=o("van-notice-bar"),C=o("van-cell"),A=o("van-list");return i(),u("div",null,[s(c,{title:"邀请商家","left-text":"返回","left-arrow":"",onClickLeft:e[0]||(e[0]=t=>n.$router.back())}),l.value?(i(),_(y,{key:0,scrollable:!1},{"right-icon":r(()=>[s(h,{name:"cross",onClick:e[1]||(e[1]=t=>l.value=!1)})]),default:r(()=>[$(I(d.value)+" ",1)]),_:1})):m("",!0),s(A,{loading:p.value,"onUpdate:loading":e[2]||(e[2]=t=>p.value=t),finished:b(a).inviteFinished,"finished-text":"没有更多了",onLoad:k},{default:r(()=>[(i(!0),u(T,null,V(b(a).inviteList,t=>(i(),_(C,{key:t.code,title:t.mobile,label:(f(t.expiredAt)?"到期时间:":"已过期:")+t.expiredAt,value:"复制链接",center:"","title-style":"flex-basis:160px; flex-grow: 1 !important"},{value:r(()=>[f(t.expiredAt)?(i(),u("div",{key:0,onClick:S=>w(t)},[...e[3]||(e[3]=[g("span",{role:"button"},"复制链接",-1),g("i",{class:"van-badge__wrapper van-icon van-icon-arrow van-cell__right-icon"},null,-1)])],8,D)):m("",!0)]),_:2},1032,["title","label"]))),128))]),_:1},8,["loading","finished"]),s(N)])}}});export{R as default};
