import{u as w,T as F,M as N,I as $}from"./merchant-CETeY2bS.js";import{d as B,b as c,e as I,c as p,a,h as v,i as U,w as r,u as f,r as o,o as u,j as M,g as T,F as z,k as A}from"./index-eYmFY_OQ.js";import"./axios-DrWYWy7P.js";const P={class:"m-2"},D=B({__name:"Index.page",setup(S){const t=w(),i=c(!1),l=I({tel:"",m:"carwash"}),_=/^1[3456789][0-9]{9}$/;function h(){const s={mobile:l.tel,module:l.m.toUpperCase()};$.add(s).then(e=>{t.inviteList.unshift(e),i.value=!1})}const m=c(!1);function b(){t.merchantFinished||N.list(t.merchantPn).then(s=>{t.merchantList.push(...s.data),s.hasNext?t.merchantPn+=1:t.merchantFinished=!0})}return(s,e)=>{const g=o("van-icon"),V=o("van-nav-bar"),d=o("van-field"),k=o("van-button"),C=o("van-cell-group"),x=o("van-form"),y=o("van-cell"),L=o("van-list");return u(),p("div",null,[a(V,{title:"商家管理","left-arrow":"",onClickLeft:e[1]||(e[1]=n=>s.$router.push("/"))},{right:r(()=>[a(g,{name:"gift-card",size:"28",onClick:e[0]||(e[0]=n=>i.value=!i.value)})]),_:1}),i.value?(u(),v(x,{key:0,onSubmit:h},{default:r(()=>[a(C,{inset:"",class:"border mt-2"},{default:r(()=>[a(d,{modelValue:l.tel,"onUpdate:modelValue":e[2]||(e[2]=n=>l.tel=n),type:"tel",label:"手机号 :",required:"",rules:[{pattern:_,message:"请填写正确的手机号码."}]},null,8,["modelValue","rules"]),a(d,{label:"功能模块",colon:"",modelValue:l.m,"onUpdate:modelValue":e[3]||(e[3]=n=>l.m=n),readonly:""},null,8,["modelValue"]),M("div",P,[a(k,{type:"primary",size:"small",block:"","native-type":"submit"},{default:r(()=>[...e[5]||(e[5]=[T(" 提交 ",-1)])]),_:1})])]),_:1})]),_:1})):U("",!0),a(L,{loading:m.value,"onUpdate:loading":e[4]||(e[4]=n=>m.value=n),finished:f(t).merchantFinished,"finished-text":"没有更多了",onLoad:b},{default:r(()=>[(u(!0),p(z,null,A(f(t).merchantList,n=>(u(),v(y,{icon:"flag-o",title:n.usr+":"+n.nickname,value:n.app},null,8,["title","value"]))),256))]),_:1},8,["loading","finished"]),a(F)])}}});export{D as default};
