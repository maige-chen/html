import{g as ee,n as J,t as $,h as R,v as te,x as ne,b as O,y as oe,z as ae,A as re,s as le,B,C as A,u as U,d as ie,c as ue,a as p,e as x,r as h,p as se,w as _,F as ce,f as D,o as fe}from"./index-DcX5xfsC.js";import{b as K,s as pe}from"./api-VRXDL6XW.js";import{S as de}from"./Enums-Di78guLT.js";function ve(e,t){return ae()?(re(e,t),!0):!1}const me=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const ye=Object.prototype.toString,ge=e=>ye.call(e)==="[object Object]",Se=()=>{};function we(...e){if(e.length!==1)return ne(...e);const t=e[0];return typeof t=="function"?$(oe(()=>({get:t,set:Se}))):O(t)}function he(e,t){function n(...l){return new Promise((i,c)=>{Promise.resolve(e(()=>t.apply(this,l),{fn:t,thisArg:this,args:l})).then(i).catch(c)})}return n}const G=e=>e();function be(e=G,t={}){const{initialState:n="active"}=t,l=we(n==="active");function i(){l.value=!1}function c(){l.value=!0}const g=(...r)=>{l.value&&e(...r)};return{isActive:$(l),pause:i,resume:c,eventFilter:g}}function L(e){return Array.isArray(e)?e:[e]}function _e(e){return te()}function Te(e,t,n={}){const{eventFilter:l=G,...i}=n;return R(e,he(l,t),i)}function Ae(e,t,n={}){const{eventFilter:l,initialState:i="active",...c}=n,{eventFilter:g,pause:r,resume:a,isActive:u}=be(l,{initialState:i});return{stop:Te(e,t,{...c,eventFilter:g}),pause:r,resume:a,isActive:u}}const Ee=Ae;function Ce(e,t=!0,n){_e()?ee(e,n):t?e():J(e)}function Ne(e,t,n){return R(e,t,{...n,immediate:!0})}const T=me?window:void 0;function Oe(e){var t;const n=A(e);return(t=n?.$el)!==null&&t!==void 0?t:n}function M(...e){const t=[],n=()=>{t.forEach(r=>r()),t.length=0},l=(r,a,u,v)=>(r.addEventListener(a,u,v),()=>r.removeEventListener(a,u,v)),i=B(()=>{const r=L(A(e[0])).filter(a=>a!=null);return r.every(a=>typeof a!="string")?r:void 0}),c=Ne(()=>{var r,a;return[(r=(a=i.value)===null||a===void 0?void 0:a.map(u=>Oe(u)))!==null&&r!==void 0?r:[T].filter(u=>u!=null),L(A(i.value?e[1]:e[0])),L(U(i.value?e[2]:e[1])),A(i.value?e[3]:e[2])]},([r,a,u,v])=>{if(n(),!r?.length||!a?.length||!u?.length)return;const m=ge(v)?{...v}:v;t.push(...r.flatMap(E=>a.flatMap(S=>u.map(b=>l(E,S,b,m)))))},{flush:"post"}),g=()=>{c(),n()};return ve(n),g}const V=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},k="__vueuse_ssr_handlers__",Ve=ke();function ke(){return k in V||(V[k]=V[k]||{}),V[k]}function Fe(e,t){return Ve[e]||t}function xe(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const Le={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},P="vueuse-storage";function Re(e,t,n,l={}){var i;const{flush:c="pre",deep:g=!0,listenToStorageChanges:r=!0,writeDefaults:a=!0,mergeDefaults:u=!1,shallow:v,window:m=T,eventFilter:E,onError:S=o=>{console.error(o)},initOnMounted:b}=l,w=(v?le:O)(typeof t=="function"?t():t),y=B(()=>A(e));if(!n)try{n=Fe("getDefaultStorage",()=>T?.localStorage)()}catch(o){S(o)}if(!n)return w;const f=A(t),W=xe(f),C=(i=l.serializer)!==null&&i!==void 0?i:Le[W],{pause:I,resume:j}=Ee(w,o=>X(o),{flush:c,deep:g,eventFilter:E});R(y,()=>N(),{flush:c});let F=!1;const q=o=>{b&&!F||N(o)},Q=o=>{b&&!F||Z(o)};m&&r&&(n instanceof Storage?M(m,"storage",q,{passive:!0}):M(m,P,Q)),b?Ce(()=>{F=!0,N()}):N();function z(o,s){if(m){const d={key:y.value,oldValue:o,newValue:s,storageArea:n};m.dispatchEvent(n instanceof Storage?new StorageEvent("storage",d):new CustomEvent(P,{detail:d}))}}function X(o){try{const s=n.getItem(y.value);if(o==null)z(s,null),n.removeItem(y.value);else{const d=C.write(o);s!==d&&(n.setItem(y.value,d),z(s,d))}}catch(s){S(s)}}function Y(o){const s=o?o.newValue:n.getItem(y.value);if(s==null)return a&&f!=null&&n.setItem(y.value,C.write(f)),f;if(!o&&u){const d=C.read(s);return typeof u=="function"?u(d,f):W==="object"&&!Array.isArray(d)?{...f,...d}:d}else return typeof s!="string"?s:C.read(s)}function N(o){if(!(o&&o.storageArea!==n)){if(o&&o.key==null){w.value=f;return}if(!(o&&o.key!==y.value)){I();try{const s=C.write(w.value);(o===void 0||o?.newValue!==s)&&(w.value=Y(o))}catch(s){S(s)}finally{o?J(j):j()}}}}function Z(o){N(o.detail)}return w}function H(e,t,n={}){const{window:l=T}=n;return Re(e,t,l?.localStorage,n)}const We=(e,t)=>{const n=H(LSK.me,Empty.merchant);return n.value.coTitle===e&&n.value.appTitle===t?new Promise(i=>{i(!0)}):je({coTitle:e,appTitle:t}).then(i=>(n.value.coTitle=i.coTitle,n.value.appTitle=i.appTitle,!0))},je=e=>K.put("/m/setting",e),ze=()=>{const e=H(LSK.me,Empty.merchant);return e.value.app===""?De().then(t=>(t.t=e.value.t,e.value=t,t)):new Promise(t=>{t(e.value)})},De=()=>K.get("/m/app"),$e=ie({__name:"Setting",setup(e){const t=se(),n=O("暂无"),l=O(""),i=O("");ze().then(r=>{r.app!==""&&(n.value=de[r.app].title),r.coTitle!==""&&(l.value=r.coTitle),r.appTitle!==""&&(i.value=r.appTitle)});function c(){We(l.value,i.value).then(r=>{pe({type:"success",message:"保存成功"})})}function g(){}return(r,a)=>{const u=h("van-watermark"),v=h("van-nav-bar"),m=h("van-col"),E=h("van-row"),S=h("van-field"),b=h("van-cell-group"),w=h("van-form"),y=h("van-divider");return fe(),ue(ce,null,[p(u,{content:""}),x("div",null,[p(v,{title:"管理后台.设置","left-arrow":"",onClickLeft:a[0]||(a[0]=f=>U(t).push("/"))}),p(w,null,{default:_(()=>[p(E,{class:"mt-2"},{default:_(()=>[p(m,{span:"12",class:"ps-3 text-secondary"},{default:_(()=>[...a[3]||(a[3]=[D(" 基本设置 ",-1)])]),_:1}),p(m,{span:"12",class:"pe-3 text-primary text-end",role:"button",onClick:c},{default:_(()=>[...a[4]||(a[4]=[D("保存",-1)])]),_:1})]),_:1}),p(b,{inset:"",class:"border mt-1"},{default:_(()=>[p(S,{label:"当前应用","model-value":n.value,readonly:"",error:"","input-align":"right"},null,8,["model-value"]),p(S,{modelValue:l.value,"onUpdate:modelValue":a[1]||(a[1]=f=>l.value=f),center:"",clearable:"",label:"公司名称",placeholder:"请输入公司名称"},null,8,["modelValue"]),p(S,{label:"应用名称",modelValue:i.value,"onUpdate:modelValue":a[2]||(a[2]=f=>i.value=f)},null,8,["modelValue"])]),_:1})]),_:1}),p(y,{dashed:""}),p(w,{onSubmit:g},{default:_(()=>[...a[5]||(a[5]=[x("div",{class:"ms-3 mt-2 text-secondary"},"手机绑定",-1),x("span",{class:"ms-3 mt-2 text-secondary fs-5"},"开发中.....",-1)])]),_:1})])],64)}}});export{$e as default};
