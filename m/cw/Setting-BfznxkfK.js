import{I as _,y as g,d as x,k as A,u as L,r as c,b as l,c as C,e as R,f as o,q as f,i as h,g as m,j as N,F as U,x as B}from"./main-CXNK52Lh.js";import{S as E}from"./Enums-glG3HjMS.js";const K=(e,t)=>{const r=_(LSK.me,Empty.merchant);return r.value.coTitle===e&&r.value.appTitle===t?new Promise(s=>{s(!0)}):$({coTitle:e,appTitle:t}).then(s=>(r.value.coTitle=s.coTitle,r.value.appTitle=s.appTitle,!0))},$=e=>g.put("/m/setting",e),F=()=>{const e=_(LSK.me,Empty.merchant);return e.value.app===""?I().then(t=>(t.t=e.value.t,e.value=t,t)):new Promise(t=>{t(e.value)})},I=()=>g.get("/m/app"),q=x({__name:"Setting",setup(e){const t=A(),r=L();function v(){localStorage.removeItem(LSK.me),window.location.reload()}const s=c("暂无"),u=c(""),p=c("");F().then(a=>{a.app!==""&&(s.value=E[a.app].title),a.coTitle!==""&&(u.value=a.coTitle),a.appTitle!==""&&(p.value=a.appTitle)});function T(){K(u.value,p.value).then(a=>{r.$cApp.appTitle=p.value,B({type:"success",message:"保存成功"})})}return(a,n)=>{const w=l("van-watermark"),b=l("van-nav-bar"),d=l("van-field"),S=l("van-button"),V=l("van-cell-group"),k=l("van-form"),y=l("van-divider");return R(),C(U,null,[o(w,{content:""}),f("div",null,[o(b,{title:"设置","left-arrow":"",onClickLeft:n[0]||(n[0]=i=>h(t).push("/")),"right-text":"退出",onClickRight:v}),o(k,null,{default:m(()=>[n[4]||(n[4]=f("h6",{class:"ms-3 mt-3"},"基本设置",-1)),o(V,{inset:"",class:"border mt-1"},{default:m(()=>[o(d,{modelValue:u.value,"onUpdate:modelValue":n[1]||(n[1]=i=>u.value=i),center:"",clearable:"",label:"公司名称:",placeholder:"请输入公司名称"},null,8,["modelValue"]),o(d,{label:"应用名称:",modelValue:p.value,"onUpdate:modelValue":n[2]||(n[2]=i=>p.value=i)},null,8,["modelValue"]),o(S,{class:"w-100",type:"primary",onClick:T},{default:m(()=>[...n[3]||(n[3]=[N("保存",-1)])]),_:1})]),_:1})]),_:1}),o(y,{dashed:""})])],64)}}});export{q as default};
