import{d as R,l as U,u as $,r,b as u,c as v,e as o,f as a,g as i,i as s,F as g,p as x,j as _,q as A,t as L,k as I}from"./main-Daeym9Qn.js";import{R as y}from"./Enums-glG3HjMS.js";import{c as S}from"./Copy-OWTIET2h.js";import{I as E}from"./borrow-Q9wncrEJ.js";const T="/u/#/i?c=",G=R({__name:"Invite",setup(V){const C=U(),n=$(),N=BASE_URL+T,h=r(0),k=r(!1),F=r(!1),b=r(!1),d={active:"active",used:"used",expired:"expired"};function p(l){switch(l){case"used":if(n.uFinished)return;break;case"expired":if(n.eFinished)return;break;default:if(n.aFinished)return}E.list(l,n.aPn).then(t=>{if(t==null||t.data==null){l===d.used&&(n.uFinished=!0),l===d.expired&&(n.eFinished=!0),l===d.active&&(n.aFinished=!0);return}switch(l){case"used":n.uList.push(...t.data),t.hasNext?n.uPn+=1:n.uFinished=!0;break;case"expired":n.eList.push(...t.data),t.hasNext?n.ePn+=1:n.eFinished=!0;break;default:n.aList.push(...t.data),t.hasNext?n.aPn+=1:n.aFinished=!0}})}return(l,t)=>{const w=u("van-nav-bar"),B=u("van-tag"),f=u("van-cell"),c=u("van-list"),m=u("van-tab"),P=u("van-tabs");return o(),v("div",null,[a(w,{title:"邀请码","left-arrow":"",onClickLeft:t[0]||(t[0]=e=>i(C).replace("/"))}),a(P,{active:h.value,"onUpdate:active":t[7]||(t[7]=e=>h.value=e)},{default:s(()=>[a(m,{title:"邀请中"},{default:s(()=>[a(c,{loading:k.value,"onUpdate:loading":t[1]||(t[1]=e=>k.value=e),finished:i(n).aFinished,"finished-text":"没有更多了",onLoad:t[2]||(t[2]=e=>p(d.active))},{default:s(()=>[(o(!0),v(g,null,x(i(n).aList,e=>(o(),_(f,{key:e.id,icon:"gift-card","is-link":"",title:e.storeTitle,value:"复制",label:T+e.code,"title-style":"flex-basis:160px; flex-grow: 1 !important",onClick:j=>i(S)(N+e.code)},{title:s(()=>[A("span",null,L(e.storeTitle),1),a(B,{type:"primary",class:"ms-1"},{default:s(()=>[I(L(i(y)[e.roles]),1)]),_:2},1024)]),_:2},1032,["title","label","onClick"]))),128))]),_:1},8,["loading","finished"])]),_:1}),a(m,{title:"已使用"},{default:s(()=>[a(c,{loading:F.value,"onUpdate:loading":t[3]||(t[3]=e=>F.value=e),finished:i(n).uFinished,"finished-text":"没有更多了",onLoad:t[4]||(t[4]=e=>p(d.used))},{default:s(()=>[(o(!0),v(g,null,x(i(n).uList,e=>(o(),_(f,{key:e.id,icon:"success",title:e.groupTitle?e.groupTitle:e.storeTitle,value:i(y)[e.roles]},null,8,["title","value"]))),128))]),_:1},8,["loading","finished"])]),_:1}),a(m,{title:"已失效"},{default:s(()=>[a(c,{loading:b.value,"onUpdate:loading":t[5]||(t[5]=e=>b.value=e),finished:i(n).eFinished,"finished-text":"没有更多了",onLoad:t[6]||(t[6]=e=>p(d.expired))},{default:s(()=>[(o(!0),v(g,null,x(i(n).eList,e=>(o(),_(f,{key:e.id,icon:"cross",title:e.storeTitle,value:e.expiredAt},null,8,["title","value"]))),128))]),_:1},8,["loading","finished"])]),_:1})]),_:1},8,["active"])])}}});export{G as default};
